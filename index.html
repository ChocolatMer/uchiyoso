<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Uchiyoso Maker</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@500;700;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />

<style>
    /* === 基本設定 === */
    :root {
        --text-main: #5a3d35;
        --text-sub: #8b6b61;
        --accent-pink: #ff9ebb;
        --accent-gradient: linear-gradient(135deg, #ff9ebb 0%, #ffc3d6 100%);
        --glass-bg: rgba(255, 255, 255, 0.15);
        --glass-border: rgba(255, 255, 255, 0.4);
        --glass-shine: rgba(255, 255, 255, 0.6);
        --glass-shadow: 0 8px 32px 0 rgba(90, 61, 53, 0.1);
        --walker-size: 64px;
        --ticker-height: 36px; /* 下部テロップの高さ */
    }

    * { box-sizing: border-box; margin: 0; padding: 0; text-decoration: none; -webkit-tap-highlight-color: transparent; }

    body {
        font-family: "Zen Maru Gothic", sans-serif;
        background-color: #fce4ec;
        background-image: url('images/background/fur-texture-pink.jpg'); /* 画像がない場合はピンク背景になります */
        background-size: cover;
        background-position: center;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden; /* PCはスクロールなし */
        color: var(--text-main);
        perspective: 1500px;
        padding-bottom: var(--ticker-height);
    }

    .ambient-light {
        position: absolute;
        width: 100%; height: 100%;
        background: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.2) 0%, rgba(0,0,0,0.1) 100%);
        pointer-events: none;
        z-index: 0;
    }

    /* === PC用 3Dグリッド === */
    .bento-container {
        position: relative;
        z-index: 10;
        width: 1000px;
        max-width: 90%;
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        grid-template-rows: auto auto auto;
        gap: 24px;
        transform: rotateX(5deg) translateY(-20px);
        transform-style: preserve-3d;
        transition: transform 0.5s ease;
    }

    /* === グラスモーフィズムカード === */
    .glass-card {
        background: var(--glass-bg);
        backdrop-filter: blur(40px) saturate(180%);
        -webkit-backdrop-filter: blur(40px) saturate(180%);
        border: 1px solid var(--glass-border);
        box-shadow: var(--glass-shadow), inset 0 0 0 1px rgba(255, 255, 255, 0.2), inset 0 1px 0 0 rgba(255, 255, 255, 0.5);
        border-radius: 36px;
        padding: 24px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        position: relative;
        overflow: hidden;
        transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        transform: translateZ(0px);
        transform-style: preserve-3d;
    }

    .glass-card:hover {
        background: rgba(255, 255, 255, 0.25);
        border-color: var(--glass-shine);
        transform: translateZ(50px) scale(1.02);
        box-shadow: 0 30px 60px rgba(0, 0, 0, 0.1), inset 0 0 20px rgba(255, 255, 255, 0.5);
        z-index: 20;
    }

    /* プロフィールエリア */
    .area-profile {
        grid-column: span 2; grid-row: span 2; align-items: flex-start; text-align: left; padding: 40px;
        background: linear-gradient(135deg, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0.1) 100%);
    }
    .profile-header { display: flex; align-items: center; gap: 24px; margin-bottom: 24px; transform: translateZ(20px); }
    .avatar {
        width: 90px; height: 90px; border-radius: 50%;
        background-color: #eee;
        background-image: url('images/background/fur-texture-pink.jpg');
        background-size: cover; border: 4px solid rgba(255,255,255,0.8);
        box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        flex-shrink: 0;
    }
    .site-title { font-size: 2.2rem; font-weight: 900; letter-spacing: 0.05em; color: var(--text-main); text-shadow: 0 2px 10px rgba(255,255,255,0.5); line-height: 1.2; }
    .site-desc { font-size: 1rem; color: var(--text-main); opacity: 0.8; font-weight: 700; margin-top: 5px; }
    .profile-text { font-size: 0.95rem; line-height: 1.8; color: var(--text-main); transform: translateZ(10px); }

    /* 中央の飾りティッカー */
    .area-ticker {
        grid-column: span 2; padding: 0; position: relative;
        background: rgba(255, 255, 255, 0.25); overflow: hidden;
        box-shadow: var(--glass-shadow), inset 0 0 20px rgba(255, 158, 187, 0.1);
    }
    .ticker-wrap {
        width: 100%; height: 100%; overflow: hidden; white-space: nowrap;
        mask-image: linear-gradient(to right, transparent 0%, black 15%, black 85%, transparent 100%);
        -webkit-mask-image: linear-gradient(to right, transparent 0%, black 15%, black 85%, transparent 100%);
        display: flex; align-items: center;
    }
    .ticker-content { display: inline-flex; align-items: center; animation: marquee 25s linear infinite; }
    .ticker-item {
        display: inline-flex; align-items: center; margin: 0 15px; font-weight: 900; font-size: 1.6rem;
        color: var(--accent-pink); text-transform: uppercase; letter-spacing: 0.1em;
        animation: dance 3s ease-in-out infinite;
    }
    .ticker-item:nth-child(even) { animation-name: dance-reverse; animation-delay: -1.5s; color: #ffc3d6; }
    .ticker-item.hollow { color: transparent; -webkit-text-stroke: 2px rgba(139, 107, 97, 0.4); opacity: 0.8; }
    .ticker-item span { margin-right: 8px; }

    /* ツールボタン */
    .area-tool { grid-column: span 1; aspect-ratio: 1 / 1; cursor: pointer; text-align: center; }
    .area-tool-wide { grid-column: span 2; aspect-ratio: auto; flex-direction: row; gap: 20px; justify-content: flex-start; padding-left: 40px; }
    .icon-circle {
        width: 64px; height: 64px; background: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center;
        font-size: 32px; color: var(--accent-pink); margin-bottom: 12px;
        box-shadow: 0 10px 25px rgba(255, 158, 187, 0.2); transition: 0.3s; transform: translateZ(20px);
        flex-shrink: 0;
    }
    .area-tool:hover .icon-circle { background: var(--accent-pink); color: white; transform: translateZ(40px) scale(1.15) rotate(-10deg); }
    .tool-info { transform: translateZ(10px); }
    .tool-label { font-weight: 800; font-size: 1.1rem; color: var(--text-main); }
    .tool-sub { font-size: 0.8rem; color: var(--text-sub); margin-top: 4px; }
    .badge {
        position: absolute; top: 20px; right: 20px; background: var(--accent-gradient); color: white;
        font-size: 0.75rem; padding: 6px 14px; border-radius: 50px; font-weight: bold;
        box-shadow: 0 5px 15px rgba(255, 158, 187, 0.5); animation: bounce 2s infinite; transform: translateZ(30px); border: 2px solid #fff;
    }

    /* シェアボタン */
    .area-share { grid-column: span 4; background: transparent; border: none; box-shadow: none; backdrop-filter: none; padding: 10px; display: flex; justify-content: center; }
    .btn-share-pill {
        padding: 14px 40px; background: rgba(255,255,255,0.7); backdrop-filter: blur(10px); border: 1px solid #fff; border-radius: 50px;
        font-weight: 800; color: var(--text-main); transition: 0.3s; display: flex; align-items: center; gap: 10px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.05); transform: translateZ(0);
    }
    .btn-share-pill:hover { background: #fff; color: var(--accent-pink); transform: translateY(-5px) scale(1.05); }

    /* 各種アニメーション */
    @keyframes marquee { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
    @keyframes dance { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
    @keyframes dance-reverse { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(5px); } }
    @keyframes bounce { 0%, 100% { transform: translateZ(30px) translateY(0); } 50% { transform: translateZ(30px) translateY(-5px); } }
    @keyframes entranceFadeUp { 0% { opacity: 0; transform: translateY(60px) scale(0.9); } 100% { opacity: 1; transform: translateY(0) scale(1); } }
    
    .glass-card, .area-share { opacity: 0; animation: entranceFadeUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }
    .glass-card:nth-of-type(1) { animation-delay: 0.1s; } 
    .glass-card:nth-of-type(2) { animation-delay: 0.2s; } 
    .glass-card:nth-of-type(3) { animation-delay: 0.3s; }
    .glass-card:nth-of-type(4) { animation-delay: 0.4s; } 
    .glass-card:nth-of-type(5) { animation-delay: 0.5s; }
    .glass-card:nth-of-type(6) { animation-delay: 0.6s; } 
    .glass-card:nth-of-type(7) { animation-delay: 0.7s; } 
    .area-share { animation-delay: 0.9s; }

    /* 背景浮遊パーティクル */
    .floating-particle {
        position: absolute; border-radius: 50%; filter: blur(8px); opacity: 0.6; animation: floatUp 15s linear infinite; z-index: -1; pointer-events: none;
    }
    @keyframes floatUp { 0% { transform: translateY(110vh) rotate(0deg); opacity: 0; } 10% { opacity: 0.6; } 90% { opacity: 0.6; } 100% { transform: translateY(-20vh) rotate(360deg); opacity: 0; } }

    /* マスコット & Pixel Walker */
    .floating-mascot {
        position: fixed; bottom: 50px; right: 40px; width: 140px; height: auto; z-index: 95; cursor: pointer;
        animation: playful-float 7s ease-in-out infinite; transition: 0.3s;
    }
    .floating-mascot img { width: 100%; display: block; filter: drop-shadow(0 8px 20px rgba(90, 61, 53, 0.25)); }
    .floating-mascot:hover { transform: scale(1.15) rotate(10deg); }
    @keyframes playful-float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px) rotate(3deg); } }

    .pixel-walker {
        position: fixed; bottom: 35px; z-index: 90; width: var(--walker-size); height: var(--walker-size); left: -200px;
        pointer-events: none; transition: transform 0.2s ease;
    }
    .pixel-walker .sprite {
        width: 100%; height: 100%; background-image: url('images/hoko/mahiru.png'); /* 必要に応じてパスを変更 */
        background-size: 300% 400%; background-repeat: no-repeat; image-rendering: pixelated;
        animation: walk-cycle 0.8s step-start infinite;
    }
    .pixel-walker[data-facing="front"] .sprite { background-position-y: 0%; animation: none; }
    .pixel-walker[data-facing="left"] .sprite  { background-position-y: 33.33%; }
    .pixel-walker[data-facing="right"] .sprite { background-position-y: 66.66%; }
    @keyframes walk-cycle { 0% { background-position-x: 0%; } 33% { background-position-x: 50%; } 66% { background-position-x: 100%; } }

    /* === ▼▼▼ 下部固定テロップバー ▼▼▼ === */
    .bottom-news-bar {
        position: fixed;
        bottom: 0; left: 0;
        width: 100%; height: var(--ticker-height);
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(5px);
        border-top: 1px solid rgba(255, 255, 255, 0.8);
        z-index: 999; /* 最前面 */
        display: flex; align-items: center;
        overflow: hidden;
        box-shadow: 0 -2px 10px rgba(90, 61, 53, 0.05);
        font-size: 0.85rem; font-weight: 700; color: var(--text-main);
    }
    .news-label {
        background: var(--accent-pink); color: #fff;
        padding: 0 12px; height: 100%;
        display: flex; align-items: center; justify-content: center;
        font-size: 0.75rem; font-weight: 900;
        flex-shrink: 0; z-index: 2;
        box-shadow: 2px 0 5px rgba(0,0,0,0.1);
    }
    .news-scroller {
        flex-grow: 1; overflow: hidden; position: relative;
        white-space: nowrap; height: 100%; display: flex; align-items: center;
    }
    .news-content {
        display: inline-block; white-space: nowrap;
        animation: news-scroll 30s linear infinite;
        padding-left: 100%;
    }
    .news-item { display: inline-block; margin-right: 40px; }
    .news-item::before {
        content: 'INFO'; display: inline-block; font-size: 0.7em;
        border: 1px solid var(--accent-pink); color: var(--accent-pink);
        padding: 0 6px; border-radius: 4px; margin-right: 8px;
        vertical-align: middle; transform: translateY(-1px);
    }
    @keyframes news-scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }

    /* === ▼▼▼ スマホ最適化 (レスポンシブ) ▼▼▼ === */
    @media (max-width: 768px) {
        body {
            display: block; /* フレックス解除して縦並びに */
            overflow-y: auto; /* スクロール可能に */
            overflow-x: hidden;
            height: auto;
            perspective: none; /* 3D解除 */
            padding-top: 40px;
            padding-bottom: calc(var(--ticker-height) + 60px); /* 下部余白 */
        }
        
        .bento-container {
            width: 94%; margin: 0 auto;
            display: flex; flex-direction: column; gap: 16px;
            transform: none !important;
        }

        /* カードのフラット化 */
        .glass-card {
            width: 100%; transform: none !important;
            margin-bottom: 0; padding: 20px;
        }
        .glass-card:hover {
            transform: translateY(-3px) !important;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        }

        /* レイアウト調整 */
        .profile-header { flex-direction: column; text-align: center; margin-bottom: 15px; }
        .area-profile { text-align: center; align-items: center; padding: 30px 20px; }
        .site-title { font-size: 1.8rem; }
        .area-ticker { height: 60px; order: 2; }
        
        /* ツールボタンを横長リスト化 */
        .area-tool {
            aspect-ratio: auto;
            flex-direction: row; justify-content: flex-start;
            text-align: left; padding: 15px 20px; gap: 15px;
        }
        .area-tool .icon-circle {
            width: 44px; height: 44px; font-size: 24px;
            margin-bottom: 0; transform: none !important;
        }
        .area-tool-wide { padding-left: 20px; }
        .badge {
            top: 50%; right: 20px; transform: translateY(-50%);
            animation: none;
        }

        /* シェアボタン */
        .area-share { display: block; width: 100%; padding: 0; margin-top: 10px; }
        .btn-share-pill { width: 100%; justify-content: center; }

        /* キャラクター調整 */
        .floating-mascot { width: 90px; bottom: calc(var(--ticker-height) + 10px); right: 10px; }
        .pixel-walker { bottom: calc(var(--ticker-height) + 5px); }
        :root { --walker-size: 48px; }
    }
</style>
</head>
<body>

    <div class="ambient-light"></div>
    
    <div class="bento-container">
        
        <!-- プロフィール -->
        <div class="glass-card area-profile">
            <div class="profile-header">
                <div class="avatar"></div>
                <div>
                    <h1 class="site-title">Uchiyoso Maker</h1>
                    <p class="site-desc">あなたの「うちよそ」を、もっと特別に。</p>
                </div>
            </div>
            <p class="profile-text">
                創作活動を支援するデザインツールセット。<br>
                美しい関係性グラフやSSを、<br>
                まるで魔法のように直感的に作成できます。
            </p>
        </div>

        <!-- 飾りティッカー -->
        <div class="glass-card area-ticker">
            <div class="ticker-wrap">
                <div class="ticker-content">
                    <div class="ticker-item"><span>♥</span>LOVE</div>
                    <div class="ticker-item hollow">CREATION</div>
                    <div class="ticker-item"><span>★</span>DREAM</div>
                    <div class="ticker-item hollow">STORY</div>
                    <div class="ticker-item"><span>♦</span>RELATION</div>
                    <div class="ticker-item hollow">UCHIYOSO</div>
                    <!-- ループ用 -->
                    <div class="ticker-item"><span>♥</span>LOVE</div>
                    <div class="ticker-item hollow">CREATION</div>
                    <div class="ticker-item"><span>★</span>DREAM</div>
                    <div class="ticker-item hollow">STORY</div>
                    <div class="ticker-item"><span>♦</span>RELATION</div>
                    <div class="ticker-item hollow">UCHIYOSO</div>
                </div>
            </div>
        </div>

        <!-- ツールリンク群 -->
        <a href="bunpumaker/index.html" class="glass-card area-tool area-tool-wide">
            <span class="badge">Update</span>
            <div class="icon-circle">
                <span class="material-symbols-rounded">bar_chart</span>
            </div>
            <div class="tool-info">
                <div class="tool-label">分布図を作る</div>
                <div class="tool-sub">探索者を分布分けしよう</div>
            </div>
        </a>

        <a href="snsmaker/index.html" class="glass-card area-tool">
            <div class="icon-circle">
                <span class="material-symbols-rounded">image</span>
            </div>
            <div class="tool-info">
                <div class="tool-label">SNSメーカー</div>
                <div class="tool-sub">会話画面風</div>
            </div>  
        </a>

        <a href="#" class="glass-card area-tool">
            <div class="icon-circle">
                <span class="material-symbols-rounded">edit_note</span>
            </div>
            <div class="tool-info">
                <div class="tool-label">SSエディタ</div>
                <div class="tool-sub">文庫本スタイル</div>
            </div>
        </a>

        <a href="labelmaker/index.html" class="glass-card area-tool">
            <span class="badge" style="background: linear-gradient(135deg, #a8cce8 0%, #8ec5fc 100%);">NEW</span>
            <div class="icon-circle">
                <span class="material-symbols-rounded">style</span>
            </div>
            <div class="tool-info">
                <div class="tool-label">ラベル</div>
                <div class="tool-sub">整理用タグ</div>
            </div>
        </a>

        <a href="backclear/index.html" class="glass-card area-tool">
            <div class="icon-circle">
                <span class="material-symbols-rounded">layers_clear</span>
            </div>
            <div class="tool-info">
                <div class="tool-label">背景除去</div>
                <div class="tool-sub">立ち絵加工</div>
            </div>
        </a>

        <a href="calendarmaker/index.html" class="glass-card area-tool">
            <span class="badge" style="background: linear-gradient(135deg, #ffe082 0%, #ffca28 100%); color: #5a3d35;">NEW</span>
            <div class="icon-circle">
                <span class="material-symbols-rounded">calendar_month</span>
            </div>
            <div class="tool-info">
                <div class="tool-label">カレンダー</div>
                <div class="tool-sub">記念日記録</div>
            </div>
        </a>

        <div class="area-share">
            <a href="#" class="btn-share-pill">
                <span class="material-symbols-rounded">share</span>
                ページをシェアする
            </a>
        </div>
    </div>

    <!-- ぬいぐるみリンク -->
    <a href="badohuro/index.html" class="floating-mascot">
        <img src="images/icons/nui1.png" alt="Mascot">
    </a>

    <!-- ピクセルウォーカー -->
    <a href="mahiruheya/index.html" target="_blank" id="pixel-walker" class="pixel-walker" data-facing="right">
        <div class="sprite"></div>
    </a>

    <!-- ▼▼▼ 下部固定ニュースバー ▼▼▼ -->
    <div class="bottom-news-bar">
        <div class="news-label">NEWS</div>
        <div class="news-scroller">
            <div class="news-content" id="news-container">
                <!-- ここにnews.jsonの内容が読み込まれます -->
                <span class="news-item">Loading...</span>
            </div>
        </div>
    </div>

    <script>
    // --- 背景パーティクル ---
    function createParticles() {
        const colors = ['#ff9ebb', '#a8cce8', '#ffffff'];
        for(let i=0; i < 12; i++) {
            const span = document.createElement('span');
            span.classList.add('floating-particle');
            const sizeValue = Math.random() * 60 + 20;
            span.style.width = sizeValue + 'px';
            span.style.height = sizeValue + 'px';
            span.style.left = Math.random() * 100 + '%';
            span.style.top = Math.random() * 100 + 'vh';
            span.style.background = colors[Math.floor(Math.random() * colors.length)];
            span.style.animationDuration = (Math.random() * 10 + 15) + 's';
            span.style.animationDelay = '-' + (Math.random() * 10) + 's';
            document.body.appendChild(span);
        }
    }
    createParticles();

    // --- ドット絵キャラ & ニュース読み込み ---
    document.addEventListener('DOMContentLoaded', () => {
        
        // 1. キャラクターの歩行制御
        const walker = document.getElementById('pixel-walker');
        const walkSpeed = 3500; 
        const stayTime = 1500;  
        const minInterval = 8000; 
        const randomInterval = 15000;

        function startWalkerSequence() {
            const w = window.innerWidth;
            const walkerWidth = walker.offsetWidth;
            const fromRight = Math.random() > 0.5;
            const startX = fromRight ? (w + walkerWidth) : (-walkerWidth * 2);
            // スマホは画面幅が狭いので停止位置を調整
            const isMobile = w < 768;
            const targetX = fromRight ? (w - (isMobile?60:120)) : (isMobile?20:80);

            walker.style.transition = 'none';
            walker.style.left = startX + 'px';
            walker.setAttribute('data-facing', fromRight ? 'left' : 'right');
            
            void walker.offsetWidth;
            
            walker.style.transition = `left ${walkSpeed}ms linear`;
            walker.style.left = targetX + 'px';

            setTimeout(() => {
                walker.setAttribute('data-facing', 'front');
                setTimeout(() => {
                    walker.setAttribute('data-facing', fromRight ? 'right' : 'left');
                    walker.style.left = startX + 'px';
                    setTimeout(scheduleNextWalk, walkSpeed);
                }, stayTime);
            }, walkSpeed);
        }
        function scheduleNextWalk() {
            setTimeout(startWalkerSequence, minInterval + Math.random() * randomInterval);
        }
        setTimeout(scheduleNextWalk, 2000);

        // 2. ニュースJSONの読み込み (index.htmlと同じ場所のnews.jsonを探します)
        fetch('news.json')
            .then(response => {
                if (!response.ok) throw new Error("JSON not found");
                return response.json();
            })
            .then(data => {
                const container = document.getElementById('news-container');
                container.innerHTML = ''; 
                
                // 配列の中身をループしてspan要素を作成 (2セット作成してループを滑らかに)
                const createItems = () => {
                    data.forEach(text => {
                        const span = document.createElement('span');
                        span.className = 'news-item';
                        span.textContent = text;
                        container.appendChild(span);
                    });
                };

                createItems();
                createItems(); // 2回繰り返して切れ目をなくす
            })
            .catch(error => {
                console.error('Error loading news:', error);
                document.getElementById('news-container').innerHTML = '<span class="news-item">Welcome to Uchiyoso Maker!</span>';
            });
    });
    </script>

</body>
</html>